{
  "default": {
    "class": "Portal",
    "kwargs": {
      "authenticator": {
        "class": "UMCAuthenticator",
        "kwargs": {
          "auth_mode": {
            "key": "auth_mode",
            "type": "config"
          },
          "group_cache": {
            "class": "GroupFileCache",
            "kwargs": {
              "cache_file": {
                "type": "static",
                "value": "/var/cache/univention-portal/groups.json"
              },
              "reloader": {
                "class": "ObjectStorageGroupsReloader",
                "kwargs": {
                  "json_path": {
                    "type": "config",
                    "key": "groups_cache_path"
                  },
                  "assets_root_path": {
                    "type": "config",
                    "key": "assets_root_path"
                  },
                  "object_storage_endpoint": {
                    "type": "config",
                    "key": "object_storage_endpoint"
                  },
                  "bucket": {
                    "type": "config",
                    "key": "object_storage_bucket"
                  },
                  "access_key_id": {
                    "type": "config",
                    "key": "object_storage_access_key_id"
                  },
                  "secret_access_key": {
                    "type": "config",
                    "key": "object_storage_secret_access_key"
                  }
                },
                "type": "class"
              }
            },
            "type": "class"
          },
          "umc_session_url": {
            "key": "umc_session_url",
            "type": "config"
          }
        },
        "type": "class"
      },
      "portal_cache": {
        "class": "PortalFileCache",
        "kwargs": {
          "cache_file": {
            "type": "static",
            "value": "/var/cache/univention-portal/portal.json"
          },
          "reloader": {
            "class": "ObjectStoragePortalReloader",
            "kwargs": {
              "json_path": {
                "type": "config",
                "key": "portal_cache_path"
              },
              "assets_root_path": {
                "type": "config",
                "key": "assets_root_path"
              },
              "object_storage_endpoint": {
                "type": "config",
                "key": "object_storage_endpoint"
              },
              "bucket": {
                "type": "config",
                "key": "object_storage_bucket"
              },
              "access_key_id": {
                "type": "config",
                "key": "object_storage_access_key_id"
              },
              "secret_access_key": {
                "type": "config",
                "key": "object_storage_secret_access_key"
              },
              "portal_dn": {
                "key": "default_domain_dn",
                "type": "config"
              }
            },
            "type": "class"
          }
        },
        "type": "class"
      },
      "scorer": {
        "class": "PathScorer",
        "kwargs": {
          "fallback_score": {
            "type": "static",
            "value": 0.5
          },
          "path": {
            "type": "static",
            "value": "/univention/portal"
          }
        },
        "type": "class"
      }
    },
    "type": "class"
  },
  "selfservice": {
    "class": "Portal",
    "kwargs": {
      "authenticator": {
        "class": "UMCAuthenticator",
        "kwargs": {
          "auth_mode": {
            "key": "auth_mode",
            "type": "config"
          },
          "group_cache": {
            "class": "GroupFileCache",
            "kwargs": {
              "cache_file": {
                "type": "static",
                "value": "/var/cache/univention-portal/groups.json"
              },
              "reloader": {
                "class": "ObjectStorageGroupsReloader",
                "kwargs": {
                  "json_path": {
                    "type": "config",
                    "key": "groups_cache_path"
                  },
                  "assets_root_path": {
                    "type": "config",
                    "key": "assets_root_path"
                  },
                  "object_storage_endpoint": {
                    "type": "config",
                    "key": "object_storage_endpoint"
                  },
                  "bucket": {
                    "type": "config",
                    "key": "object_storage_bucket"
                  },
                  "access_key_id": {
                    "type": "config",
                    "key": "object_storage_access_key_id"
                  },
                  "secret_access_key": {
                    "type": "config",
                    "key": "object_storage_secret_access_key"
                  }
                },
                "type": "class"
              }
            },
            "type": "class"
          },
          "umc_session_url": {
            "key": "umc_session_url",
            "type": "config"
          }
        },
        "type": "class"
      },
      "portal_cache": {
        "class": "PortalFileCache",
        "kwargs": {
          "cache_file": {
            "type": "static",
            "value": "/var/cache/univention-portal/selfservice.json"
          },
          "reloader": {
            "class": "ObjectStoragePortalReloader",
            "kwargs": {
              "json_path": {
                "type": "config",
                "key": "selfservice_portal_cache_path"
              },
              "assets_root_path": {
                "type": "config",
                "key": "assets_root_path"
              },
              "portal_dn": {
                "key": "selfservice_portal_dn",
                "type": "config"
              },
              "object_storage_endpoint": {
                "type": "config",
                "key": "object_storage_endpoint"
              },
              "bucket": {
                "type": "config",
                "key": "object_storage_bucket"
              },
              "access_key_id": {
                "type": "config",
                "key": "object_storage_access_key_id"
              },
              "secret_access_key": {
                "type": "config",
                "key": "object_storage_secret_access_key"
              }
            },
            "type": "class"
          }
        },
        "type": "class"
      },
      "scorer": {
        "class": "PathScorer",
        "kwargs": {
          "fallback_score": {
            "type": "static",
            "value": 0.5
          },
          "path": {
            "type": "static",
            "value": "/univention/selfservice"
          }
        },
        "type": "class"
      }
    },
    "type": "class"
  }
}
